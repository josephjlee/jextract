/**
    jExtract: a function for extracting data from DOM.
    Version: 0.0.7
    Author: Mikhail Kormanowsky (@kormanowsky)
    Date: 08.01.2018
*/
(function(){var b=function(A){return A===void 0},c=function(A){return"object"==typeof A&&A instanceof Object&&!(A instanceof Array)},d=function(A){return"object"==typeof A&&A instanceof Array},f=function(A){return t&&A instanceof t},g=function(A){return A instanceof s},h=function(A){return A instanceof NodeList},j=function(A){return"string"==typeof A},k=function(A){return j(A)&&!A.length},l=function(A){return!j(A)||k(A)?!1:(A=document.querySelector(A),null!==A)},m=function(A){if(!j(A)||k(A))return!1;try{A=JSON.parse(A)}catch(B){return!1}return!0},n=function(A){return!j(A)||k(A)?!1:(A=A.trim(),"<"==A[0]&&">"==A[A.length-1])},o=function(A){return d(A)&&!A.length},p=function(A){return"function"==typeof A},r=function(A){this.get=function(B){return B=B||!0,B?A.trim():A},this.match=function(B,C){var D=this.get().match(new RegExp(B));return!b(C)&&d(D)&&C in D?D[C]:D},this.toInt=function(B){return B=B||!1,!isNaN(parseInt(this.get()))||B?parseInt(this.get()):0},this.toFloat=function(B){B=B||!1;var C=this.get().replace(",",".");return!isNaN(parseFloat(C))||B?parseFloat(C):0}},s=function(A){this.text=function(){return A.innerText||A.textContent},this.attr=function(B){return A.getAttribute(B)},this.get=function(){return A}},t=!!p(window.jQuery)&&window.jQuery,u=function(A,B){if("."==B)return[A];if(!l(B))return console.error("jExtract error: couldn`t find elements that match selector \""+B+"\"."),!1;var C=A.get().querySelectorAll(B),D=[];return C=h(C)?C:[C],x(C,function(E,F){D[F]=new s(E)}),D},w=function(A,B){var C=B[0],D=B[1];return b(A)||(j(A)||p(A)?C=A:d(A)&&!o(A)&&(C=A[0],1<A.length&&(D=A.slice(1)))),[C,D]},x=function(A,B){if(d(A)||h(A))A.forEach(B);else if(c(A))for(var C in A){var D=A[C];B(D,C,A)}},y=function(A){if(l(A))return new s(document.querySelector(A));if(n(A)){var B=document.createElement("div");return B.innerHTML=A,B}},z=function(A,B,C){var D={};return(A=A||{},B=B||new s(document),C=C||!1,c(A)||(m(A)?A=JSON.parse(A):console.error("jExtract error: JSON error",A)),j(B))?z(A,y(B)):(f(B)&&(B=B[0]),g(B)||(B=new s(B)),x(A,function(E,F){if(c(E))return void(D[F]=z(E,B));var K,L,G=["text",[]],H=["get",[]],I=!1,J=[];j(E)?K=u(B,E):(K=u(B,E[0]),c(E[1])?L=E[1]:G=w(E[1],G),H=w(E[2],H),!b(E[3])&&(I=!!E[3])),x(K,function(M,N){if(b(L)){var O=function(){},P=[],Q=null;if(p(G[0]))O=G[0],P=[M,N,K].concat(G[1]);else if(j(G[0]))if(P=G[1],G[0]in M)O=M[G[0]],Q=M;else if(t&&G[0]in t(M.get()))O=t(M.get())[G[0]],Q=t(M.get());else return void console.error("jExtract error: undefined element method \""+G[0]+"\".");var S,R=O.apply(Q,P);if(j(R)&&H[0]){if(O=function(){},P=[],Q=null,R=new r(R),p(H[0]))O=H[0],P=[R,N].concat(H[1]);else if(j(H[0]))if(P=H[1],H[0]in R)O=R[H[0]],Q=R;else if(H[0]in new String(R.get()))O=R.get()[H[0]],Q=R.get();else return void console.error("jExtract error: undefined text method \""+H[0]+"\".");S=O.apply(Q,P)}else S=R;J.push(S)}else J.push(z(L,M))}),!I&&2>J.length&&(J=J[0]),D[F]=J}),C?JSON.stringify(D):D)};z.addTextMethod=function(A,B){r.prototype[A]=B},z.addElementMethod=function(A,B){s.prototype[A]=B},window.$E=window.jExtract=z,t&&(window.jQuery.fn.jExtract=function(A){return z(A,t(this))})})();