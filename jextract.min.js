function jExtract(t,n){if("function"!=typeof jQuery)throw"jExtract error: jExtract depends on jQuery, but it wasn`t loaded";t=t||{},n=n||$("html");var r=function(t){return"."==t?n:n.find(t)},e=function(t){var n,r;return u(t)?n=t:a(t)||(n=t[0],t.length>1&&(r=t.slice(1))),[n,r]},o=function(t){return void 0===t},c=function(t){return"object"==typeof t&&t instanceof Object&&!(t instanceof Array)},i=function(t){return"object"==typeof t&&t instanceof Array},u=function(t){return"string"==typeof t},a=function(t){return i(t)&&!t.length},f=function(t){return"function"==typeof t},p=function(t){return null===t},s=function(t){this._text=t},l={};return s.prototype.get=function(t){return t=t||!0,t?this._text.trim():this._text},s.prototype.match=function(t,n){var r=this.get().match(new RegExp(t));return!o(n)&&i(r)&&n in r?r[n]:r},s.prototype.toInt=function(t){return t=t||!1,!isNaN(parseInt(this.get()))||t?parseInt(this.get()):0},s.prototype.toFloat=function(t){t=t||!1;var n=this.get().replace(",",".");return!isNaN(parseFloat(n))||t?parseFloat(n):0},u(n)?jExtract(t,$("<div>"+n+"</div>")):($.each(t,function(t,h){if(c(h))l[t]=jExtract(h,n);else{var y,j,x=["text",[]],g=["get",[]],E=!1,v=[];u(h)?y=r(h):(y=r(h[0]),c(h[1])?j=h[1]:i(h[1])&&!a(h[1])?x=e(h[1]):f(h[1])&&(x[0]=h[1]),f(h[2])?g[0]=h[2]:i(h[2])&&!a(h[2])&&(g=e(h[2])),o(h[3])||(E=!!h[3])),y.each(function(t,n){if(o(j)){var r,e,a,l=$(n);f(x[0])?(r=x[0],e=[l,t,y].concat(x[1]),a=null):u(x[0])?(r=l[x[0]],e=x[1],a=l):(r=function(){},a=null,e=[]);var h,E=r.apply(a,e);if(p(E)||o(E))return;c(E)||i(E)||u(E)?(E instanceof s||(E=new s(E+"")),f(g[0])?(r=g[0],e=[E,t].concat(g[1]),content=null):u(g[0])?(r=E[g[0]],e=g[1],a=E):(r=function(){},a=null,e=[]),h=r.apply(a,e)):h=E,v.push(h)}else v.push(jExtract(j,$(n)))}),!E&&v.length<2&&(v=v[0]),l[t]=v}}),l)}jQuery.fn.jExtract=function(t){return jExtract(t,$(this))},$E=jExtract;
