/**
    jExtract: a small function for extracting data from DOM.
    Version: 0.0.6
    Author: Mikhail Kormanowsky (@kormanowsky)
    Date: 07.01.2018
*/
!function(){var n=function(n){return void 0===n},t=function(n){return"object"==typeof n&&n instanceof Object&&!(n instanceof Array)},r=function(n){return"object"==typeof n&&n instanceof Array},e=function(n){return l&&n instanceof h},i=function(n){return n instanceof NodeList},o=function(n){return"string"==typeof n},u=function(n){return r(n)&&!n.length},c=function(n){return"function"==typeof n},f=function(n){return null===n},a=function(t){this.get=function(n){return n=n||!0,n?t.trim():t},this.match=function(t,e){var i=this.get().match(new RegExp(t));return!n(e)&&r(i)&&e in i?i[e]:i},this.toInt=function(n){return n=n||!1,!isNaN(parseInt(this.get()))||n?parseInt(this.get()):0},this.toFloat=function(n){n=n||!1;var t=this.get().replace(",",".");return!isNaN(parseFloat(t))||n?parseFloat(t):0}},s=function(n){this.text=function(){return n.innerText||n.textContent},this.attr=function(t){return n.getAttribute(t)},this.element=n},l=c(window.jQuery),h=!!l&&window.jQuery,d=function(n,t){if(l)return"."===t?n:n.find(t);if("."===t)return[n];var r=n.querySelectorAll(t);return r instanceof NodeList?r:[r]},p=function(n){var t,r;return o(n)?t=n:u(n)||(t=n[0],n.length>1&&(r=n.slice(1))),[t,r]},v=function(n,o){if(r(n)||i(n))n.forEach(o);else if(e(n))n.each(function(t,r){o(h(r),t,n)});else if(t(n))for(var u in n){var c=n[u];o(c,u,n)}},g=function(n){if(o(n)){if(l)return h("<div>"+n+"</div>");var t=document.createElement("div");return t.innerHTML=n,t}return n},y=function(n){return l?e(n)?n:h(n):new s(n)},w=function(){return l?h("html"):document},j=function(e,i,s){var l={};if(e=e||{},i=i||w(),s=s||!1,o(e))try{e=JSON.parse(e)}catch(n){console.error("jExtract error: JSON error",n,e)}return o(i)?j(e,g(string)):(v(e,function(e,s){if(t(e))l[s]=j(e,i);else{var h,g,w=["text",[]],m=["get",[]],x=!1,N=[];o(e)?h=d(i,e):(h=d(i,e[0]),t(e[1])?g=e[1]:r(e[1])&&!u(e[1])?w=p(e[1]):c(e[1])&&(w[0]=e[1]),c(e[2])?m[0]=e[2]:r(e[2])&&!u(e[2])&&(m=p(e[2])),n(e[3])||(x=!!e[3])),v(h,function(e,i){if(n(g)){var u,s,l,d=y(e);if(c(w[0]))u=w[0],s=[d,i,h].concat(w[1]),l=null;else if(o(w[0])){if(!(w[0]in d))return void console.error('jExtract error: undefined method "'+w[0]+'".');u=d[w[0]],s=w[1],l=d}else u=function(){},l=null,s=[];var p,v=u.apply(l,s);if(f(v)||n(v))return;t(v)||r(v)||o(v)?(v instanceof a||(v=new a(v+"")),c(m[0])?(u=m[0],s=[v,i].concat(m[1]),content=null):o(m[0])?(u=v[m[0]],s=m[1],l=v):(u=function(){},l=null,s=[]),p=u.apply(l,s)):p=v,N.push(p)}else N.push(j(g,e))}),!x&&N.length<2&&(N=N[0]),l[s]=N}}),s?JSON.stringify(l):l)};window.$E=window.jExtract=j,l&&(window.jQuery.fn.jExtract=function(n){return j(n,h(this))})}();